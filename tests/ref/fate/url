Testing ff_make_absolute_url:
                                            (null) baz                  => baz
                                          /foo/bar baz                  => /foo/baz
                                          /foo/bar ../baz               => /baz
                                          /foo/bar /baz                 => /baz
                                http://server/foo/ baz                  => http://server/foo/baz
                             http://server/foo/bar baz                  => http://server/foo/baz
                                http://server/foo/ ../baz               => http://server/baz
                         http://server/foo/bar/123 ../../baz            => http://server/baz
                         http://server/foo/bar/123 /baz                 => http://server/baz
                         http://server/foo/bar/123 https://other/url    => https://other/url
    http://server/foo/bar?param=value/with/slashes /baz                 => http://server/baz
            http://server/foo/bar?param&otherparam ?someparam           => http://server/foo/bar?someparam
                             http://server/foo/bar //other/url          => http://other/url
